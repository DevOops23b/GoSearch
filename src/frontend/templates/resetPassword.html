{{ define "content" }}

<div class="container">
    <h1>Password Reset Required</h1>
    <p>For security reasons, you need to change your password.</p>
    
    <form action="/api/reset-password" method="POST">
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" value="{{.Username}}" readonly>
        </div>
        
        <div class="form-group">
            <label for="current_password">Current Password:</label>
            <input type="password" id="current_password" name="current_password" required>
        </div>
        
        <div class="form-group">
            <label for="new_password">New Password:</label>
            <input type="password" id="new_password" name="new_password" required>
            <small>Password must be at least 8 characters long</small>
        </div>
        
        <div class="form-group">
            <label for="confirm_password">Confirm New Password:</label>
            <input type="password" id="confirm_password" name="confirm_password" required>
        </div>
        
        {{if .Error}}
        <div class="error-message">
            {{.Error}}
        </div>
        {{end}}
        
        <div class="form-group">
            <button type="submit">Reset Password</button>
        </div>
    </form>
</div>

<script>
    // Client-side validation
    document.querySelector('form').addEventListener('submit', function(event) {
        const newPassword = document.getElementById('new_password').value;
        const confirmPassword = document.getElementById('confirm_password').value;
        
        if (newPassword !== confirmPassword) {
            event.preventDefault();
            alert('New passwords do not match!');
            return false;
        }
        
        if (newPassword.length < 8) {
            event.preventDefault();
            alert('Password must be at least 8 characters long!');
            return false;
        }
        
        return true;
    });
</script>
    
{{ end }}